#深度学习
将智能驾驶感知的上游，下游工作罗列一下大致分为一下几步
f1
深度学习主要应用于传统不易解决的问题。
目标识别
态势预估
行为决策
目标识别是目前在最广泛的应用的领域，工程化成熟，可以mobileye Q4, 
用到深度下学习
态势预估，目标航迹的预测，如在十字路口预测车辆行直行转弯，
行为决策：难点问题，在复杂条件下决策，如路上听着一辆双闪的车，因该从旁边绕开。传统finite state machine复杂场景下复杂度很高
神经网络神经元组成网络 ，基本的元素感知器，受仿生学启发
输入，权重，激励函数，输出
已知道x,w,求y，正向传播，
知己yx，求w, 反向传播，网络训练的过程，需要激励函数可导
 
多层神经网络，“降维打击”，输入空间隐射到高维空间，就能用线分割
神经函数逼近，单个神经网络做到线性分类，多层做到非线性分割，
手写字分类，每个像素完全连接神经网络，最后一层输出测层
全连接网络，这种结构的问题参数巨大，
1000，1000的图片，中间100隐藏层，所需的参数
改进的结构是局部连接层，10*10*100*100，局部连接优点是利用了图片的局部，空间上是相邻的，识别一只猫的图片 ，像素和他旁边的像素相关
可以共用一个参数，参数共享
卷积网络
卷积的作用是特征提取。小块区域和图片扫，用于特征提取，相乘相加，如果如进行翻转互相关，如果翻转卷积。
在特征提取方面，卷积和互相关的功能是类似的，习惯称为卷积。
局部连接网络的示意图，输入与空间上相邻的输入。
受生物视网膜结构的启发。
卷积层自动提取特征，底层提取基本的，如线检测，中间层是局部特征，
底层线特征，中层， 人脸眼睛鼻子，车轮子车窗，高层像鬼脸
应用
目标检测，与  图片分类不同，目标检测不仅要识别图片中有什么物体，还要bounding box框出。
实际要·训练两个模型，一个classifer，一个regresser
许多方法，r-cnn, fast-cnn, yolo,
在feature map中找出可能包含目标的区域。
重复区域删除，初步结果会识别重复区域，如何将重复区域删除。nonmax supression
语义分割，图像信息像素信息（255，255,0）并不知道像素的含义，语义分割的目的是图片里信息的含义。
语义分割网络与图片分类不同的地方在于，分类网络最后一层是全连接层，语义分割网络是全卷积层，在feature map级别进行识别
主要应用可行使区域。车道线识别，车道不清晰，虚线，阴影，lanenet, 做车道线识别是先进行语义分割
与其他传感器的融合
摄像头的最大缺陷是深度信息不是直接测量得到的而是推测出来的。虽然摄像头可以得到深度信息但不准确，特别是在特定场景下。
智能驾驶安全要求高，性能限制的是以他最差情况下为准。
扬长避短，摄像头的优势在目标识别，激光雷达优势是精准测距离，雷达测试。
摄像头和激光雷达稠密特征，像素的点云融合。都是稠密特征适用于原始数据的融合。 雷达稀疏特征，shi'yong'yu目标
工程化
模型训练，到在控制器上移植，
工程化步骤，选择主干网络，修改top layer， 准备实验数据，工程化移植，验证的步骤
主干网络，目的是特征提取。今年主流的网络结构，深度增加的趋势，2014 vgg29， 2015 resnet152层
并不是层数越高越好，有权衡关系，时间和空间的权衡，技术时间越长，
主干网络的计算复杂度和性能，比较 vgg 和 resnet，resnet 层数高但模型更小，效果也更好，深度网络的优越性
选择完底层网络，选择更改上层网络，如原来的网络在coco上训练的40多类，想做个真对道路目标的，将顶层改为6个，在用新数据集训练  
底层网络可以共用，底层特征类似。好处可以用少量数据就能训练，80% 的工作在底层特征，提高训练速度，减少训练数据。
pytorch, 选择主干网络，model zoo 可以下载训练过的网络。
选择训练数据
公开数据: Kitti, cityscape,nuscence, udacity, waymo
先验知识（如第一视角，结构化道路）
特殊场景，国内特有道路，工况
数据不足时可用采用数据扩充data augmentation
不好数据会降低模型精度
模型工程化
生态的重要性，tensorRT, 通用的结构onnx，对并行计算进行优化
模块设计
子模块承担独立任务, 减少模块间通信，提高并行
子模块可以用深度学习（黑盒模型），通过大量数据充分验证其安全性
顶层模块采用相对简单的白盒模型，便于与人沟通
闭环，很大部分工作来自数据，20%工作来自修改模型，80%时间来自工具。
深度学习需要大量数据，pipeline，模型设计，部署，验证，数据采集的闭环
